                           FreeCAD Stream Deck Addon
                          ---------------------------
                                    v0.0.6


This is an addon for FreeCAD to use an Elgato Stream Deck macropad as an input
device (https://www.elgato.com).

The toolbar icons currently displayed in the FreeCAD window are mirrored onto
the Stream Deck's keys and constantly updated as their availability and icons
change.

When a Stream Deck button is pressed, the corresponding toolbar tool is run
as if clicked on directly in the main window.

The toolbar icons are organized in pages. A toolbar occupies its own set of
pages (only one page if the Stream Deck has enough buttons). Some toolbars are
displayed constantly in all the pages, while some are always excluded.
See configuration below.

Two keys at the bottom right of the Stream Deck are dedicated to change from
page to page.



Installation
------------

Copy this git repo directory in your FreeCAD addon directory. Typically:

User:
  Linux:   ~/.local/share/FreeCAD/Mod/
  Windows: %APPDATA%\FreeCAD\Mod\

System-wide:
  Linux:   /usr/share/freecad/Mod/
  Windows: C:\Program Files\FreeCAD\Mod\

You also need to install the following Python modules (for instance using
python3 -m pip install or python -m pip install):

- streamdeck
- Pillow
- appdirs



Configuration
-------------

Edit parameters.py and change the values you want. The ones you're really
interested in are:

- use_streamdeck_device_type

  The type of the Stream Deck device you want to use, if more than one device
  is connected. Comment out to use any type of device.

- use_streamdeck_device_serial

  The serial number of the Stream Deck device you want to use, if more than one
  device is connected. Comment out to use a device with any serial number.

- execute_shell_command_when_starting

  Shell script to run when starting. Useful to kill another Stream Deck
  application such as streamdeck-ui and free up access to the Stream Deck
  device for example. Comment out to disable.

- execute_shell_command_when_stopping

  Shell script to run when stopping. Useful to restart another Stream Deck
  application such as streamdeck-ui after the Stream Deck device has been
  freed up for example. Comment out to disable.

- exclude_toolbars_from_streamdeck

  List of toolbar names you never want displayed on your StreamDeck regardless
  of whether they're enabled in the main window, to reduce clutter. Comment
  out or set to [] to display all the toolbars.

- toolbars_on_every_streamdeck_pages

  List of toolbar names you want repeated in all the pages, so they're always
  available regardless of the particular toolbar page you're in. Comment out
  or set to [] if you don't want any toolbars repeated on all the pages.

  If your Stream Deck has enough keys - Stream Deck XL for example - you can
  have more such permanently-displayed toolbar icons without multiplying the
  number of pages.

  If your Stream Deck has fewer keys, you may want to have fewer
  permanently-displayed toolbar icons to free up more keys per page.

- streamdeck_brightness

  How bright the Stream Deck's display should be. Percentage from 0% to 100%.
  The brighter, the more wear and burn in on the display of course.



User parameters
-------------------

If the addon is installed system-wide, each user may want to define their own
set of parameters. To do this, the user should copy the parameters.py file as
freecad_streamdeck_addon.py in their local configuration directory, typically:

Linux:   ~/.config/
Windows: %LOCALAPPDATA%\

The format of the user parameters file is identical to that of parameters.py
and the user parameters take precedence over those in parameters.py.



Usage
-----

The toolbar icons are mirrored onto the Stream Deck keys. There are usually
more toolbar buttons than Stream Deck keys available, so the icons are
organized in pages on the Stream Deck. Use the left and right arrow keys to
change pages.

The permanently-displayed toolbar icons are displayed between blue brackets.
They are available in all the pages.

Toolbar icons that have a submenu attached to them are displayed between red
brackets. Long-pressing such an icon will expand it. Long-pressing it again
or any of the submenu icons will collapse it back.



Notes
-----

- The addon needs exclusive access to the Stream Deck device. It cannot coexist
  with Elgato's Stream Deck software on Windows or with streamdeck-ui on Linux.
  Either the addon has control of the Stream Deck device or the other
  application does, but not both at the same time.

- Tested with FreeCAD 0.22 on Linux and Windows, with a Stream Deck Mk2 and a
  Stream Deck XL. It may or may not work with other models.

- This is very alpha software. It's very rough on the edged and probably buggy.
  Please bear with me as I make it nicer :)



           ---------------------------------------------------------
                   Bug reports? Questions? You can email me.
                   Run this command to get my email address:
           C=base64\ -d;$C<<<Y205emEybHpRSEoxYm1KdmVDNWpiMjBLCg==|$C
           ---------------------------------------------------------
