                           FreeCAD Stream Deck Addon
                          ---------------------------
                                    v0.1.0


This is an addon for FreeCAD to use an Elgato Stream Deck macropad as an input
device (https://www.elgato.com).

The toolbar tools currently displayed in the FreeCAD window are mirrored onto
the Stream Deck's keys and constantly updated to match the tools in the main
window.

When a Stream Deck key is pressed, the corresponding toolbar tool is run
as if clicked on directly in the main window.

When a Stream Deck key representing a toolbar tool with a sub-menu is
long-pressed, the tool is expanded to show the additional tools in the
sub-menu. When any of the expanded sub-menu tools is long-pressed again,
the sub-menu is collapsed back to a single tool. The tools with sub-menus
are shown between red brackets.

The toolbar tools are organized in pages. A toolbar occupies its own set of
pages (only one page if the Stream Deck has enough buttons).

Some toolbars are displayed constantly in all the pages. Those toolbar tools
are shown between blue brackets.

Other toolbars are always excluded from the Stream Deck and never shown.

Two keys at the bottom right of the Stream Deck are dedicated to navigating
from page to page.



Installation
------------

Copy this git repo directory in your FreeCAD addon directory. Typically:

User:
  Linux:   ~/.local/share/FreeCAD/Mod/
  Windows: %APPDATA%\FreeCAD\Mod\

System-wide:
  Linux:   /usr/share/freecad/Mod/
  Windows: C:\Program Files\FreeCAD\Mod\

You also need to install the following Python modules (for instance using
python3 -m pip install or python -m pip install):

- streamdeck
- Pillow



Configuration
-------------

In the FreeCAD menu, go to Tools > Edit Parameters.
All the parameters to control the addon are under BaseApp > StreamDeckAddon.

The ones you're really interested in are:

- Enabled

  Enable or disable the addon. When it is disabled, the Stream Deck device is
  fully released and usable by other applications while FreeCAD is running.

- Device > Filter > UseDeviceType

  The type of the Stream Deck device you want to use if more than one device
  is connected. E.g. "Stream Deck XL".
  Leave blank to use a device of any type.

- Device > Filter > UseDeviceSerial

  The serial number of the Stream Deck device you want to use if more than one
  device is connected. E.g. "A00NA325307HF5".
  Leave blank to use a device with any serial number.

- StartStopCommands > ExecuteShellCommandWhenStarting

  Shell script to run when starting. Useful to kill another Stream Deck
  application such as streamdeck-ui and release the Stream Deck device
  for use by this addon. E.g. "killall streamdeck".
  Leave blank to disable.

- StartStopCommands > ExecuteShellCommandWhenStopping

  Shell script to run when stopping. Useful to restart another Stream Deck
  application such as streamdeck-ui after the Stream Deck device has been
  releases by this addon. E.g. "streamdeck &".
  Leave blank to disable.

- ToolbarLists > ToolbarsExcluded_CommaSeparated

  Comma-separated list of names of toolbars you never want displayed on the
  Stream Deck regardless of whether they're enabled in the main window, to
  reduce clutter. E.g. "Help,Navigation".
  Leave blank to display all the toolbars on the Stream Deck.

- ToolbarLists > ToolbarsOnEveryPage_CommaSeparated

  Comma-separated list of names of toolbars you want repeated on all the Stream
  Deck pages, so they're always available regardless of the particular toolbar
  page you're in.  E.g. "Edit,View".
  Note that those permanently-displayed toolbars are laid out on the Stream Deck
  in the order they're listed.

  If your Stream Deck has enough keys - Stream Deck XL for example - you can
  have more permanently-displayed toolbar tools without multiplying the number
  of pages.

  If your Stream Deck has fewer keys, you may want to have fewer
  permanently-displayed toolbar tools to free up more keys per page.

  Leave blank if you don't want any toolbars repeated on all the pages.

- Display > Brightness > BrightnessPercent

  How bright the Stream Deck's display should be. Percentage from 0% to 100%.
  The brighter, the more wear and burn in on the display of course.

- Display > ScreenSaver > Enabled
- Display > ScreenSaver > FadeWhenUserInactiveForSeconds
- Display > ScreenSaver > FadeToBrightness
- Display > ScreenSaver > FadeTimeSeconds

  Stream Deck screen saver parameters.

Note that all addon setting changes in the Parameter Editor take effect
immediately. You don't need to restart FreeCAD.



Notes
-----

- The addon needs exclusive access to the Stream Deck device. It cannot coexist
  with Elgato's Stream Deck software on Windows or with streamdeck-ui on Linux.
  Either the addon has control of the Stream Deck device or the other
  application does, but not both at the same time.

- Tested with FreeCAD 0.22 on Linux and Windows, with a Stream Deck Mk2 and a
  Stream Deck XL. It may or may not work with other models.

- This is very alpha software. It's very rough on the edged and probably buggy.
  Please bear with me as I make it nicer :)



           ---------------------------------------------------------
                   Bug reports? Questions? You can email me.
                   Run this command to get my email address:
           C=base64\ -d;$C<<<Y205emEybHpRSEoxYm1KdmVDNWpiMjBLCg==|$C
           ---------------------------------------------------------
